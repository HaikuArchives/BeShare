<!--This file created 5/6/00 8:10 PM by Claris Home Page version 1.0--><HTML><HEAD>   <TITLE>ArrowButton</TITLE>   <META NAME=GENERATOR CONTENT="Claris Home Page 1.0">   <X-SAS-WINDOW TOP=58 BOTTOM=751 LEFT=159 RIGHT=887></HEAD><BODY BGCOLOR="#FFFFFF"><H1>FileDocumentWindow</H1><P>&nbsp;</P><P>Derived from: <B>public BWindow</B></P><P>Declared in: <B>FileDocumentWindow.h</B></P><P>Library: <B>none</B></P><P><HR></P><H2><A NAME="Overview"></A>Overview</H2><P>Augments BWindow to manage association between the document windowand a file which the document window represents.  FileDocumentWindowkeeps track of the file name, and for untitled windows, handlesbringing up a Save As... <TT>BFilePanel</TT> if the user selectsSave.  If the user has modified the document (if the child class hascalled <TT><A HREF="#SetModifiedFlag()">SetModifiedFlag()</A></TT>since the last load or save operation) then<TT>FileDocumentWindow</TT> handles presenting a Save, Don't Save,Cancel dialog box.  It can work with<TT><A HREF="DocumentApp.html">DocumentApp</A></TT> as well toprovide this "nice" quit behavior at the application level.  A childclass which has a Save As... menu item should have this menu itempost a <TT>FDW_SAVE_AS_REQESTED</TT> message to the window, while aSave item should post a <TT>B_SAVE_REQUESTED</TT> message.  Both ofthese are handled by the <TT>FileDocumentWindow</TT>'s<TT><A HREF="#MessageReceived()">MessageReceived()</A> </TT>method. To actually save the document, the child class should implement the<TT><A HREF="#Save()">Save()</A></TT> method.</P><P><HR></P><H2><A NAME="Constructor and Destructor"></A>Constructor andDestructor</H2><P><HR></P><H3><A NAME="FileDocumentWindow()"></A>FileDocumentWindow()</H3><P>&nbsp;</P><PRE>      FileDocumentWindow(BRect frame, const char* filename, window_type type, uint32 flags,             uint32 workspace = B_CURRENT_WORKSPACE);      FileDocumentWindow(BRect frame, const char* filename, window_look look, window_feel feel,            uint32 flags, uint32 workspace = B_CURRENT_WORKSPACE)&nbsp;</PRE><P>Creates a <TT>FileDocumentWindow</TT>.  For new documents, startthem with the name "Untitled" "Untitled document" "Untitled 1" etc.,without any path specified.  This will flag the document as beingtruly untitled, and a Save request (as opposed to Save as...) willdefer to Save as... to give it a name.</P><P><B>See also: </B>the BWindow constructor</P><P><HR></P><H3><A NAME="~FileDocumentWindow()"></A>~FileDocumentWindow()</H3><P>&nbsp;</P><PRE>      ~FileDocumentWindow()</PRE><P>&nbsp;</P><P>Deletes the save panel if any has been created, and unregistersthe window with the<TT><A HREF="DocumentApp.html">DocumentApp</A></TT> object, if<TT>be_app</TT> is a<TT><A HREF="DocumentApp.html">DocumentApp</A></TT>.</P><P><HR></P><H2><A NAME="Member Functions"></A>Member Functions</H2><P>&nbsp;</P><P><HR></P><H3><A NAME="MessageReceived()"></A>MessageReceived()</H3><P>&nbsp;</P><PRE>      void MessageReceived(BMessage* message)</PRE><P>&nbsp;</P><P>Handles <TT>B_SAVE_REQUESTED</TT> and<TT>FDW_SAVE_AS_REQUESTED</TT> messages.</P><P><HR></P><H3><A NAME="QuitOnceSaved()"></A>QuitOnceSaved()</H3><P>&nbsp;</P><PRE>      void QuitOnceSaved()</PRE><P>&nbsp;</P><P>Used in conjunction with Save, Don't Save, Cancel dialog followinga window close request to indicate that once the window has saved itscontents to a file, it should quit.</P><P><HR></P><H3><A NAME="QuitRequested()"></A>QuitRequested()</H3><P>&nbsp;</P><PRE>      virtual bool QuitRequested<TT>(</TT>)</PRE><P>&nbsp;</P><P>If the window content has been modified (if<TT><A HREF="#SetModifiedFlag()">SetModifiedFlag()</A></TT> has beencalled), returns false so as not to stall the event loop, andpresents the user with a Save, Don't Save, Cancel dialog box.</P><P><HR></P><H3><A NAME="Save()"></A>Save()</H3><P>&nbsp;</P><PRE>      virtual bool Save()</PRE><P>&nbsp;</P><P>Should be implemented by child classes to save the document to thefile returned by <TT><A HREF="GetFileName()">GetFileName()</A></TT>.</P><P><HR></P><H3><A NAME="SetFileName()"></A>SetFileName(),<A NAME="GetLeafName()"></A>GetLeafName() ,<A NAME="GetFileName()"></A> GetFileName()</H3><P>&nbsp;</P><PRE>      virtual void SetFileName(const char* filename)      const char* GetLeafName(const char* a_filename = NULL)      const char* GetFileName()&nbsp;&nbsp;</PRE><P>Sets the file name, or returns the file name (with full path otjust the leaf name) for the file.</P><P><HR></P><H3><A NAME="SetModifiedFlag()"></A>SetModifiedFlag(),<A NAME="IsModifiedFlagSet()"></A>IsModifiedFlagSet()</H3><P>&nbsp;</P><PRE>      void SetModifiedFlag(bool state = true)      bool IsModifiedFlagSet()&nbsp;&nbsp;</PRE><P>Flags the file as having been modifed, and returns the state ofthis flag.</P><P><HR>&nbsp;</P><P>By Brian Tietz</P><P>Copyright 2000</P><P>Bug reports (including documentation errors) and feature requestscan be sent to<A HREF="mailto:briant@timelinevista.com">briant@timelinevista.com</A>.</P><P>&nbsp;</P><P>&nbsp;</P></BODY></HTML>