<!--This file created 5/6/00 7:21 PM by Claris Home Page version 1.0--><HTML><HEAD>   <TITLE>CLVColumn</TITLE>   <META NAME=GENERATOR CONTENT="Claris Home Page 1.0">   <X-SAS-WINDOW TOP=54 BOTTOM=758 LEFT=275 RIGHT=934></HEAD><BODY BGCOLOR="#FFFFFF"><H1>CLVColumn</H1><P>&nbsp;</P><P>Derived from: <B>public BArchivable /*Not currently*/</B></P><P>Declared in: <B>CLVColumn.h</B></P><P>Library: <B>none</B></P><P><HR></P><H2><A NAME="Overview"></A>Overview</H2><P>&nbsp;</P><P>A CLVColumn is an object that can cooperate with a ColumnListViewto display one column as a header for one column of items in a list.</P><P><HR></P><H2><A NAME="Constructor and Destructor"></A>Constructor andDestructor</H2><P>&nbsp;</P><P><HR></P><H3><A NAME="CLVColumn()"></A>CLVColumn()</H3><P>&nbsp;</P><PRE>      CLVColumn(const char* label, float width = 20.0, uint32 flags = 0,            float min_width = 20.0);       <TT>CLVColumn(</TT>BMessage *archive<TT>)</TT>    /*Not implemented*/</PRE><P>&nbsp;</P><P>Initializes the new CLVColumn. The label will appear in the columnheading.</P><P>The flags can be:</P><P><TABLE BORDER=1 CELLPADDING=1 WIDTH="100%">   <TR>      <TD>         <P><B><TT>CLV_SORT_KEYABLE</TT></B>      </TD><TD>         <P>The user can select this column to be the key column for         sorting the items in the list      </TD></TR>   <TR>      <TD>         <P><B><TT>CLV_NOT_MOVABLE</TT></B>      </TD><TD>         <P>The user can't drag this column to move it      </TD></TR>   <TR>      <TD>         <P><B><TT>CLV_NOT_RESIZABLE</TT></B>      </TD><TD>         <P>The user can't drag the resize handle to change the size         of this column      </TD></TR>   <TR>      <TD>         <P><B><TT>CLV_LOCK_AT_BEGINNING</TT></B>      </TD><TD>         <P>This column is locked at the beginning for display         purposes      </TD></TR>   <TR>      <TD>         <P><B><TT>CLV_LOCK_AT_END</TT></B>      </TD><TD>         <P>This column is locked at the end for display purposes      </TD></TR>   <TR>      <TD>         <P><B><TT>CLV_HIDDEN</TT></B>      </TD><TD>         <P>This column is initially hidden from the user      </TD></TR>   <TR>      <TD>         <P><B><TT>CLV_MERGE_WITH_RIGHT</TT></B>      </TD><TD>         <P>This column is merged with the column to the right of it.         It will not show a border / resize handle between the two         items      </TD></TR>   <TR>      <TD>         <P><B><TT>CLV_LOCK_WITH_RIGHT</TT></B>      </TD><TD>         <P>This column is locked to the column to the right of it.         If either column is dragged to a new position, the partner         will be dragged with it. Any number of columns may be locked         together      </TD></TR>   <TR>      <TD>         <P><B><TT>CLV_EXPANDER</TT></B>      </TD><TD>         <P>This column should display an expander. You may only use         one expander in a ColumnListView, and an expander may not be         added to a non-hierarchal ColumnListView. It may not have a         label. Its width is automatically set to 20.0. The only         flags that affect it are <B><TT>CLV_NOT_MOVABLE</TT></B>,         <B><TT>CLV_LOCK_AT_BEGINNING</TT></B>,         <B><TT>CLV_NOT_SHOWN</TT></B> and         <B><TT>CLV_LOCK_WITH_RIGHT</TT></B>. The others are set for         you: <B><TT>CLV_NOT_RESIZABLE</TT></B> |         <B><TT>CLV_MERGE_WITH_RIGHT</TT></B>. If the user uses the         arrow in an expander to display the items underneath it, the         subitems will be indented, and will push the contents of the         next column to the right by an appropriate amount      </TD></TR>   <TR>      <TD>         <P><B><TT>CLV_PUSH_PASS</TT></B>      </TD><TD>         <P>Allows the column, if pushed by an expander, to "pass on"         that push and push the next column over as well. Typically,         this is used in an icon column following an expander, so         that the name (or whatever) column that follows it will be         pushed by the expander as well.      </TD></TR>   <TR>      <TD>         <P><B><TT>CLV_HEADER_TRUNCATE</TT></B>      </TD><TD>         <P>Causes the text in the column label to be truncated with         an ellipsis if it doesn't fit in the width of the column         header.      </TD></TR>   <TR>      <TD>         <P><B><TT>CLV_TELL_ITEMS_WIDTH</TT></B>      </TD><TD>         <P>Causes this column to call ColumnWidthChanged for all         items when the width of this column changes. This is         necessary for columns with string truncation using         CLVEasyItem.      </TD></TR>   <TR>      <TD>         <P><B><TT>CLV_RIGHT_JUSTIFIED</TT></B>      </TD><TD>         <P>Causes this column to Causes the column, when resized, to         shift its content, not just the content of subsequent         columns. This does not affect the rendering of content in         items in the column, just the area that gets scrolled.         Rendering of items in your CLVListItem-derived class's         DrawItemColumn method should reflect this behavior. For         CLVEasyItems, set right_justified to true in your         SetColumnContent calls.      </TD></TR></TABLE></P><P><B>See also:<TT><A HREF="ColumnListView.html#AddColumn()">ColumnListView::AddColumn()</A></TT></B></P><P><HR></P><H3><A NAME="~CLVColumn()"></A>~CLVColumn()</H3><P>&nbsp;</P><PRE>      virtual <TT>~CLVColumn()</TT></PRE><P>&nbsp;</P><P>If the column has been added to a ColumnListView, removes it thendeletes the column.</P><P><HR></P><H2><A NAME="Member Functions"></A>Member Functions</H2><P>&nbsp;</P><P><HR></P><H3><A NAME="Archive()"></A>Archive()</H3><P>&nbsp;</P><PRE>      virtual status_t <TT>Archive(</TT>BMessage *archive, bool deep = true<TT>)</TT> const</PRE><P>&nbsp;</P><P>Currently not implemented. It isn't high on my priorities, sincearchival is not something I'm making use of. If someone needs thisfunctionality and fills it in, please send me the modified code sothat others can benefit from it.</P><P><B>See also: <TT>BArchivable::Archive()</TT></B>,<B><TT>Instantiate()</TT></B> static function</P><P><HR></P><H3><A NAME="DrawColumnHeader()"></A>DrawColumnHeader()</H3><P>&nbsp;</P><PRE>      virtual void DrawColumnHeader(BView* view, BRect header_rect, bool sort_key,             bool focus, float font_ascent<TT>)</TT></PRE><P>&nbsp;</P><P>Can be overridden to implement your own column header drawing. Itshould be rendered in view, in the header_rect provided. If sort_keyis <B><TT>true</TT></B>, it should be underlined. If focus is<B><TT>true</TT></B>, it is being dragged or clicked on and should berendered in <B><TT>BeFocusBlue</TT></B>. font_ascent is the ascent ofthe font selected for the ColumnListView to use for the header.</P><P>- The background will already be filled with and LowColor set toBeBackgroundGrey<BR>- The highlight and shadow edges will already be drawn<BR>- The header_rect does not include the one-pixel border for thehighlight and shadow edges<BR>- The view font will already be set to the font specified when theColumnListView was constructed, and should not be changed<BR>- If text is being rendered, it should be rendered at BPointtext_point(header_rect.left+8.0,header_rect.top+1.0+font_ascent)<BR>- If sort_key is true, the text should be underlined, with theunderline being drawn from BPoint(text_point.x-1,text_point.y+2.0) toBPoint(text_point.x-1+label_width,text_point.y+2.0)<BR>- If focus is true, the text and underline should be in BeFocusBlue,otherwise in Black.</P><P><B>See also: <TT><A HREF="#CLVColumn()">CLVColumn()</A></TT></B></P><H3><HR><A NAME="Flags()"></A>Flags()</H3><P>&nbsp;</P><PRE>      uint32 void Flags(<TT>)</TT> const</PRE><P>&nbsp;</P><P>Returns the flags for this column.</P><P><B>See also: <TT><A HREF="#CLVColumn()">CLVColumn()</A></TT></B></P><P><HR></P><H3><A NAME="GetHeaderView()"></A>GetHeaderView()</H3><P>&nbsp;</P><PRE>      BView* GetHeaderView() const&nbsp;</PRE><P>&nbsp;</P><P>Returns the header view which contains this column.</P><P><HR></P><H3><A NAME="GetLabel()"></A>GetLabel()</H3><P>&nbsp;</P><PRE>      const char* GetLabel() const&nbsp;</PRE><P>&nbsp;</P><P>Returns the label for this column.</P><P><HR></P><H3><A NAME="GetParent()"></A>GetParent()</H3><P>&nbsp;</P><PRE>      ColumnListView* GetParent() const&nbsp;</PRE><P>&nbsp;</P><P>Returns the ColumnListView which owns this column.</P><P><HR></P><H3><A NAME="SetShown()"></A>SetShown(),<A NAME="IsShown()"></A>IsShown()</H3><P>&nbsp;</P><PRE>      virtual void SetShown(bool shown)&nbsp;      bool <TT>IsShown()</TT> const</PRE><P>&nbsp;</P><P>Sets or returns whether the column is currently shown.<B><TT><A HREF="#IsShown()">IsShown()</A></TT></B> returns<B><TT>true</TT></B> if the column is currently shown (though notnecessarily visible as it may be outside the ColumnListView'srectangle, in which case it is accessible using the horizontal scrollbar if the ColumnListView has one). Returns <B><TT>false</TT></B>otherwise.</P><P><HR></P><H3><A NAME="SetWidth()"></A>SetWidth(),<A NAME="Width()"></A>Width()</H3><P>&nbsp;</P><PRE>      virtual void SetWidth(float width)&nbsp;      float Width() const</PRE><P>&nbsp;</P><P>Sets or returns the width of the column. To detect changes in thewidth of the column, override<B><TT><A HREF="ColumnListView.html#ColumnWidthChanged()">ColumnListView::ColumnWidthChanged()</A></TT></B>.</P><P><HR></P><H3><A NAME="SetSortMode()"></A>SetSortMode(),<A NAME="SortMode()"></A>SortMode()</H3><P>&nbsp;</P><PRE>      virtual void SetSortMode(CLVSortMode mode)&nbsp;      CLVSortMode SortMode() const</PRE><P>&nbsp;</P><P>Sets or returns the sort mode of the column. Sort modes may be<B><TT>Ascending</TT></B>, <B><TT>Descending </TT></B>or<B><TT>NoSort</TT></B>. A mode other than ascending or descendingdoes not necessarily make it used for sorting, as it also needs to beselected as a sort key. To detect user changes in the sort mode ofthe column, override<B><TT><A HREF="ColumnListView.html#SetSortMode()">ColumnListView::SetSortMode()</A></TT></B>.</P><P><B>See also:<TT><A HREF="ColumnListView.html#SetSortKey()">ColumnListView::SetSortKey()</A>,<A HREF="ColumnListView.html#AddSortKey()">ColumnListView::AddSortKey()</A></TT></B></P><P>&nbsp;</P><P><HR></P><H2><A NAME="Utility Functions"></A>Utility Functions</H2><P>&nbsp;</P><P><HR></P><H3><A NAME="GetTruncatedString()"></A>GetTruncatedString()</H3><P>&nbsp;</P><PRE>      void <TT>GetTruncatedString(</TT>const char* full_string, char* truncated, float width,            int32 truncate_buf_size, const BFont* font)</PRE><P>&nbsp;</P><P>Truncates a full_string to fit in the space provided, placing theresults in a buffer which must be provided in truncated.</P><P><HR></P><P>By Brian Tietz</P><P>Copyright 1997-2000</P><P>Bug reports (including documentation errors) and feature requestscan be sent to<A HREF="mailto:briant@timelinevista.com">briant@timelinevista.com</A>.</P><P>&nbsp;</P></BODY></HTML>